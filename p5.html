<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Krishna Khanchandani | Interactive Portfolio</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Rajdhani:wght@300;500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --neon-blue: #00f3ff;
            --neon-pink: #ff00ff;
            --neon-green: #0aff00;
            --glass-bg: rgba(10, 20, 30, 0.85);
        }
        body { margin: 0; overflow: hidden; background-color: #050505; font-family: 'Rajdhani', sans-serif; }
        
        /* --- HUD / UI LAYOUT --- */
        #ui-layer {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none;
            z-index: 10;
        }

        .header {
            position: absolute;
            top: 20px; left: 30px;
            color: white;
            pointer-events: auto;
        }
        h1 {
            font-family: 'Orbitron', sans-serif;
            font-size: 2.5rem;
            margin: 0;
            text-shadow: 0 0 10px var(--neon-blue);
        }
        .subtitle {
            font-size: 1.2rem;
            color: var(--neon-blue);
            letter-spacing: 2px;
            text-transform: uppercase;
        }

        .social-hud {
            position: absolute;
            top: 30px; right: 30px;
            display: flex;
            gap: 15px;
            pointer-events: auto;
        }
        .hud-btn {
            background: rgba(0, 243, 255, 0.1);
            border: 1px solid var(--neon-blue);
            color: var(--neon-blue);
            padding: 8px 20px;
            text-decoration: none;
            font-weight: bold;
            text-transform: uppercase;
            transition: 0.3s;
            backdrop-filter: blur(4px);
        }
        .hud-btn:hover {
            background: var(--neon-blue);
            color: #000;
            box-shadow: 0 0 15px var(--neon-blue);
        }

        .hints {
            position: absolute;
            bottom: 20px; left: 30px;
            color: #888;
            font-size: 0.9rem;
        }

        /* --- 3D FLOATING LABELS --- */
        .node-label {
            font-family: 'Orbitron', sans-serif;
            font-size: 14px;
            font-weight: bold;
            padding: 5px 12px;
            border-radius: 4px;
            border: 1px solid currentColor;
            pointer-events: none; 
            user-select: none;
            margin-top: -40px; 
            letter-spacing: 2px;
            transition: all 0.3s ease;
        }

        /* --- CONTENT MODAL --- */
        #info-modal {
            position: absolute;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%) scale(0.9);
            width: 60%;
            max-width: 800px;
            max-height: 80vh;
            background: var(--glass-bg);
            border: 1px solid var(--neon-blue);
            box-shadow: 0 0 30px rgba(0, 243, 255, 0.2);
            padding: 40px;
            border-radius: 10px;
            color: white;
            opacity: 0;
            pointer-events: none;
            overflow-y: auto;
            transition: all 0.4s ease;
            backdrop-filter: blur(10px);
            display: none;
            z-index: 100;
        }
        #info-modal.active {
            display: block;
            opacity: 1;
            transform: translate(-50%, -50%) scale(1);
            pointer-events: auto;
        }
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid rgba(255,255,255,0.2);
            padding-bottom: 15px;
            margin-bottom: 20px;
        }
        .modal-title {
            font-family: 'Orbitron', sans-serif;
            font-size: 2rem;
            color: var(--neon-blue);
        }
        .close-btn {
            background: none;
            border: none;
            color: #fff;
            font-size: 2rem;
            cursor: pointer;
        }
        .modal-content h3 { color: var(--neon-green); margin-top: 20px; }
        .modal-content ul { line-height: 1.6; padding-left: 20px; }
        .modal-content li { margin-bottom: 10px; color: #ddd; }
        
        .modal-link {
            color: var(--neon-pink);
            text-decoration: none;
            border-bottom: 1px dashed var(--neon-pink);
            transition: 0.3s;
        }
        .modal-link:hover {
            background: rgba(255, 0, 255, 0.1);
            color: #fff;
            border-bottom: 1px solid #fff;
        }

        .tag {
            display: inline-block;
            background: rgba(255, 0, 255, 0.2);
            border: 1px solid var(--neon-pink);
            padding: 4px 10px;
            border-radius: 4px;
            font-size: 0.8rem;
            margin-right: 5px;
            margin-bottom: 5px;
        }
        .action-btn {
            display: inline-block;
            margin-top: 15px;
            background: var(--neon-green);
            color: black;
            padding: 10px 20px;
            text-decoration: none;
            font-weight: bold;
            border-radius: 4px;
        }

        #loader {
            position: fixed; top:0; left:0; width:100%; height:100%;
            background: #000; z-index: 999;
            display: flex; justify-content: center; align-items: center;
            color: var(--neon-blue); font-family: 'Orbitron'; font-size: 1.5rem;
            transition: opacity 1s;
        }
    </style>
</head>
<body>

    <div id="loader">INITIALIZING SYSTEM...</div>

    <div id="ui-layer">
        <div class="header">
            <h1>KRISHNA KHANCHANDANI</h1>
            <div class="subtitle">Full Stack & AI Engineer</div>
            <div style="margin-top:5px; font-size: 0.9rem; color: #aaa;">
                +91 9956562388 | khanchandani2904@gmail.com
            </div>
        </div>

        <div class="social-hud">
            <a href="https://www.linkedin.com/in/krishna-khanchandani-434855320/" target="_blank" class="hud-btn">LinkedIn</a>
            <a href="https://github.com/KRiSHnA88H" target="_blank" class="hud-btn">GitHub</a>
            <a href="https://leetcode.com/u/krishna_khanchandani/" target="_blank" class="hud-btn">LeetCode</a>
        </div>

        <div class="hints">
            <p>► CLICK Objects to Expand Data</p>
            <p>► DRAG to Rotate View</p>
        </div>
    </div>

    <div id="info-modal">
        <div class="modal-header">
            <div class="modal-title" id="modal-title">Title</div>
            <button class="close-btn" id="close-modal">&times;</button>
        </div>
        <div class="modal-content" id="modal-body"></div>
    </div>

    <div id="canvas-container"></div>

    <script type="importmap">
        {
            "imports": {
                "three": "https://unpkg.com/three@0.160.0/build/three.module.js",
                "three/addons/": "https://unpkg.com/three@0.160.0/examples/jsm/",
                "gsap": "https://unpkg.com/gsap@3.12.5/index.js"
            }
        }
    </script>

    <script type="module">
        import * as THREE from 'three';
        import { OrbitControls } from 'three/addons/controls/OrbitControls.js';
        import { CSS2DRenderer, CSS2DObject } from 'three/addons/renderers/CSS2DRenderer.js';

        // --- 1. RESUME DATA ---
        const resumeData = {
            "projects": {
                label: "PROJECTS",  
                title: "PROJECTS & CODE", 
                color: 0xff0055,
                geometry: "box",
                content: `
                    <h3>Retrieval-Augmented Generation (RAG) Pipeline [AI/Python]</h3>
                    <ul>
                        <li>Developed a modular AI-powered document query system using Python to answer user queries from custom datasets.</li>
                        <li>Implemented text loading, vector embeddings, cosine similarity for retrieval, and LLM-based generation.</li>
                        <li>Optimized pipeline stages for reproducibility.</li>
                    </ul>
                    <a href="https://github.com/KRiSHnA88H/public_RAG" target="_blank" class="action-btn">View Project</a>
                    <hr style="border-color:rgba(255,255,255,0.1); margin: 20px 0;">
                    
                    <h3>Moving Canon (Game Engine) [JS/HTML5]</h3>
                    <ul>
                        <li>Engineered a responsive 2D browser shooting game using vanilla JavaScript and HTML5 Canvas (No engines used).</li>
                        <li>Implemented custom game loop, collision detection, and enemy AI.</li>
                        <li>Integrated persistent high-score tracking.</li>
                    </ul>
                    <a href="https://krishna88h.github.io/moving_canon-web-/frontpage2.html" target="_blank" class="action-btn">View Project</a>
                    <hr style="border-color:rgba(255,255,255,0.1); margin: 20px 0;">

                    <h3>Snake Game [C/C++]</h3>
                    <ul>
                        <li>Architected a console-based game in pure C, implementing custom memory logic.</li>
                        <li>Handled real-time keyboard input using kbhit() and ANSI escape codes.</li>
                    </ul>
                    <a href="https://github.com/KRiSHnA88H/c-snake-game" target="_blank" class="action-btn">View Project</a>

                    <h3>EM Waves Visualization</h3>
                    <ul>
                        <li>Developed interactive educational tool for electric/magnetic fields.</li>
                    </ul>
                    <a href="https://krishna88h.github.io/CA3cse326/em1home.html" target="_blank" class="action-btn">View Project</a>
                `
            },
            "skills": {
                label: "SKILLS",
                title: "TECHNICAL SKILLS",
                color: 0x0aff00,
                geometry: "icosahedron",
                content: `
                    <h3>Languages</h3>
                    <div>
                        <span class="tag">C++</span> <span class="tag">Python</span> <span class="tag">Java</span> <span class="tag">C</span> <span class="tag">JavaScript</span>
                    </div>
                    
                    <h3>Core Concepts</h3>
                    <div>
                        <span class="tag">Data Structures & Algorithms</span> <span class="tag">OOP</span> <span class="tag">System Design</span>
                    </div>

                    <h3>Developer Tools</h3>
                    <div>
                        <span class="tag">Git</span> <span class="tag">GitHub</span> <span class="tag">VS Code</span> <span class="tag">Linux/Unix</span>
                    </div>

                    <h3>Libraries</h3>
                    <div>
                        <span class="tag">HTML5 Canvas</span> <span class="tag">STL</span> <span class="tag">NumPy</span> <span class="tag">OpenCV</span>
                    </div>
                `
            },
            "about": {
                label: "PROFILE",
                title: "PROFILE & EDUCATION",
                color: 0x00f3ff,
                geometry: "sphere",
                content: `
                    <h3>Lovely Professional University (2028)</h3>
                    <p><strong>B.Tech in Computer Science and Engineering</strong></p>
                    <p>Current CGPA: <span style="color:var(--neon-green); font-size:1.2rem;">9.24 / 10.0</span></p>
                    <p>Phagwara, Punjab</p>
                    
                    <h3>Achievements & Certifications</h3>
                    <ul>
                        <li><strong>LeetCode:</strong> Solved 100+ DSA problems; Earned "50 Days Badge" & September Badge.</li>
                        <li>
                            <strong><a href="https://drive.google.com/file/d/1yRFjAUKqX1bNw6PtrOk3rRnwuPFRVfjk/view" target="_blank" class="modal-link">Deloitte Data Analytics Job Simulation</a>:</strong> 
                            Completed tasks in data analysis & forensic tech (Aug 2025).
                        </li>
                        <li>
                            <strong><a href="https://drive.google.com/file/d/1EeD-GRZ63nY-VI3UrgbHMBOP8Vqu-3K0/view" target="_blank" class="modal-link">C Programming Certification</a>:</strong> 
                            72-hour course by Iamneo Platform.
                        </li>
                    </ul>
                `
            },
            "experience": {
                label: "EXP",
                title: "EXPERIENCE",
                color: 0xffaa00,
                geometry: "torus",
                content: `
                    <h3>National Service Scheme (NSS) - Volunteer</h3>
                    <p><em>2024 - Present</em></p>
                    <ul>
                        <li>Led a team of 15 volunteers in organizing community service events, impacting over 200 beneficiaries.</li>
                        <li>Coordinated a cleanliness drive under Swachh Bharat Mission.</li>
                        <li>Participated in awareness campaigns on health and hygiene.</li>
                    </ul>
                `
            }
        };

        // --- 2. SCENE SETUP ---
        const scene = new THREE.Scene();
        scene.fog = new THREE.FogExp2(0x050505, 0.02);

        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        camera.position.set(0, 3, 10);

        const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.setPixelRatio(window.devicePixelRatio);
        renderer.toneMapping = THREE.ReinhardToneMapping;
        document.getElementById('canvas-container').appendChild(renderer.domElement);

        const labelRenderer = new CSS2DRenderer();
        labelRenderer.setSize(window.innerWidth, window.innerHeight);
        labelRenderer.domElement.style.position = 'absolute';
        labelRenderer.domElement.style.top = '0px';
        labelRenderer.domElement.style.pointerEvents = 'none'; 
        document.body.appendChild(labelRenderer.domElement);

        const controls = new OrbitControls(camera, renderer.domElement);
        controls.enableDamping = true;
        controls.maxPolarAngle = Math.PI / 2 - 0.1;

        // --- 3. ENVIRONMENT ---
        const gridHelper = new THREE.GridHelper(50, 50, 0x00f3ff, 0x222222);
        scene.add(gridHelper);

        const particlesGeom = new THREE.BufferGeometry();
        const particlesCnt = 1000;
        const posArray = new Float32Array(particlesCnt * 3);
        for(let i=0; i < particlesCnt * 3; i++) {
            posArray[i] = (Math.random() - 0.5) * 40;
        }
        particlesGeom.setAttribute('position', new THREE.BufferAttribute(posArray, 3));
        const particlesMat = new THREE.PointsMaterial({ size: 0.05, color: 0xffffff, opacity: 0.5, transparent: true });
        const particlesMesh = new THREE.Points(particlesGeom, particlesMat);
        scene.add(particlesMesh);

        const ambientLight = new THREE.AmbientLight(0x404040, 2); 
        scene.add(ambientLight);
        
        const dirLight = new THREE.DirectionalLight(0xffffff, 1);
        dirLight.position.set(5, 10, 7);
        scene.add(dirLight);

        // --- 4. CREATE 3D OBJECTS & LABELS ---
        const objects = [];
        const clickableGroup = new THREE.Group();
        scene.add(clickableGroup);

        function createNode(key, x, z) {
            const data = resumeData[key];
            let geom;
            
            if(data.geometry === 'box') geom = new THREE.BoxGeometry(1.5, 1.5, 1.5);
            else if(data.geometry === 'sphere') geom = new THREE.SphereGeometry(1, 32, 32);
            else if(data.geometry === 'icosahedron') geom = new THREE.IcosahedronGeometry(1, 0);
            else geom = new THREE.TorusKnotGeometry(0.8, 0.3, 100, 16);

            const mat = new THREE.MeshStandardMaterial({ 
                color: 0x111111,
                emissive: data.color,
                emissiveIntensity: 0.8,
                roughness: 0.2,
                metalness: 0.8,
                wireframe: true
            });

            const mesh = new THREE.Mesh(geom, mat);
            mesh.position.set(x, 1.5, z);
            mesh.name = key; 
            
            // -- ADD FLOATING LABEL (Dynamic Color) --
            const div = document.createElement('div');
            div.className = 'node-label';
            div.textContent = data.label; 
            
            // FIXED: Hex string conversion bug + CSS Styling
            const hexColor = '#' + data.color.toString(16).padStart(6, '0');
            div.style.color = hexColor;
            div.style.borderColor = hexColor;
            div.style.backgroundColor = `rgba(${ (data.color >> 16) & 255 }, ${ (data.color >> 8) & 255 }, ${ data.color & 255 }, 0.1)`; // Low opacity background
            div.style.boxShadow = `0 0 10px ${hexColor}`;
            div.style.textShadow = `0 0 5px ${hexColor}`;

            const label = new CSS2DObject(div);
            label.position.set(0, 2, 0); 
            mesh.add(label);

            const ringGeom = new THREE.RingGeometry(1.8, 2, 32);
            const ringMat = new THREE.MeshBasicMaterial({ color: data.color, side: THREE.DoubleSide, transparent: true, opacity: 0.5 });
            const ring = new THREE.Mesh(ringGeom, ringMat);
            ring.rotation.x = -Math.PI / 2;
            ring.position.y = -1.5;
            mesh.add(ring);

            clickableGroup.add(mesh);
            objects.push(mesh);
        }

        createNode('about', 0, 0);       
        createNode('projects', -5, 2);   
        createNode('skills', 5, 2);      
        createNode('experience', 0, -5); 

        // --- 5. INTERACTION LOGIC ---
        const raycaster = new THREE.Raycaster();
        const mouse = new THREE.Vector2();
        
        const modal = document.getElementById('info-modal');
        const modalTitle = document.getElementById('modal-title');
        const modalBody = document.getElementById('modal-body');
        const closeBtn = document.getElementById('close-modal');

        function openModal(key) {
            const data = resumeData[key];
            const hexColor = '#' + data.color.toString(16).padStart(6, '0');
            modalTitle.innerText = data.title;
            modalTitle.style.color = hexColor;
            modalBody.innerHTML = data.content;
            modal.classList.add('active');
        }

        closeBtn.addEventListener('click', () => {
            modal.classList.remove('active');
        });

        window.addEventListener('click', (event) => {
            if(modal.classList.contains('active')) return; 

            mouse.x = (event.clientX / window.innerWidth) * 2 - 1;
            mouse.y = -(event.clientY / window.innerHeight) * 2 + 1;

            raycaster.setFromCamera(mouse, camera);
            const intersects = raycaster.intersectObjects(clickableGroup.children);

            if(intersects.length > 0) {
                const object = intersects[0].object;
                openModal(object.name);
                
                import('https://unpkg.com/gsap@3.12.5/index.js').then((gsapLib) => {
                    const gsap = gsapLib.gsap;
                    gsap.to(object.rotation, { y: object.rotation.y + Math.PI, duration: 0.5 });
                    gsap.to(object.scale, { x: 1.5, y: 1.5, z: 1.5, duration: 0.2, yoyo: true, repeat: 1 });
                });
            }
        });

        window.addEventListener('mousemove', (event) => {
            if(modal.classList.contains('active')) return;
            
            mouse.x = (event.clientX / window.innerWidth) * 2 - 1;
            mouse.y = -(event.clientY / window.innerHeight) * 2 + 1;
            
            raycaster.setFromCamera(mouse, camera);
            const intersects = raycaster.intersectObjects(clickableGroup.children);

            if (intersects.length > 0) {
                document.body.style.cursor = 'pointer';
                intersects[0].object.material.wireframe = false; 
            } else {
                document.body.style.cursor = 'default';
                clickableGroup.children.forEach(obj => obj.material.wireframe = true);
            }
        });

        // --- 6. ANIMATION LOOP ---
        const clock = new THREE.Clock();

        function animate() {
            requestAnimationFrame(animate);
            const time = clock.getElapsedTime();

            objects.forEach((obj, i) => {
                obj.rotation.y += 0.005;
                obj.rotation.x += 0.002;
                obj.position.y = 1.5 + Math.sin(time + i) * 0.2; 
            });

            particlesMesh.rotation.y = time * 0.05;
            gridHelper.position.z = (time * 2) % 2; 

            controls.update();
            renderer.render(scene, camera);
            labelRenderer.render(scene, camera); 
        }

        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
            labelRenderer.setSize(window.innerWidth, window.innerHeight);
        });

        setTimeout(() => {
            document.getElementById('loader').style.opacity = 0;
            setTimeout(() => document.getElementById('loader').remove(), 1000);
        }, 1000);

        animate();
    </script>
</body>
</html>